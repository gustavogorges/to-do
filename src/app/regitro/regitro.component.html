<app-nav></app-nav>
<div class="mainDiv">
  <div class="mainHeader">
    <div class="titleDiv">
      <p class="cadastroTarefaTitle">Cadastre a sua Tarefa Aqui!</p>
    </div>
    <div class="mainCadastro">
      <input
        *ngIf="mostraInput"
        placeholder="Nome Tarefa"
        [(ngModel)]="tarefa.nomeTarefa"
        class="inputTarefa"
        [disabled]="cardAddBoolean"
      />

      <select [(ngModel)]="tarefa.classeTarefa" [disabled]="cardAddBoolean">
        <option *ngFor="let item of categoriasGeral">{{ item }}</option>
      </select>

      <button
       class="btnCadastrar"
       (click)="cadastrarTarefa()"
       [disabled]="cardAddBoolean"
        >Cadastro</button>
    </div>
    <app-modal
      *ngIf="mostraModal"
      (clicouCadastrarTipo)="novoTipoTarefa($event)"
    ></app-modal>
  </div>

  <section class="Content">
    <div class="mainBox">
      <div class="Box"
       *ngFor="let div of categoriasGeral; index as indice"
        (dragover)="dragoverCategoria(div, $event)"
        (drop)="dropCategoria($event)">
        <div class="flexTitleBox">
          <h1 class="nomeCategoria"
          [style.background-color]="coresGeral[indice]"
          >{{ div }}</h1>
          <button [disabled]="cardRemoveBoolean" href="#" class="removeBtn" (click)="removerClasse(indice)">X</button>
        </div>
        <h4 *ngFor="let tarefa of tarefasGeral; index as indice">
          <div 
          *ngIf="div == tarefa.classeTarefa"
          class="teste"
          draggable="tarefa.draggable"
          (dragstart)="dragstart(tarefa)"
          (drop)="getIndex($event, indice)" 
          >  
            <p class="nomeTarefa" (click)="Click(tarefa)">{{ tarefa.nomeTarefa }}</p>
            <button [disabled]="cardEditBoolean">editar</button>
            <p *ngIf="tarefa.click">seleção</p>
            <select
              (change)="mudarCategoria()"
              [(ngModel)]="tarefa.classeTarefa"
              *ngIf="tarefa.click"
            >
              <option *ngFor="let item of categoriasGeral">{{ item }}</option>
            </select>
            <div
             *ngFor="let propriedade of propriedadesGeral"
             class="divPropriedades"
             >
             <p *ngIf="tarefa.click">{{propriedade.nomePropriedade}}</p>
              <input
              class="inputTexto" 
              *ngIf="tarefa.click"
              [(ngModel)]="propriedadeTexto"
               >
               <p *ngIf="tarefa.propriedade != null">{{tarefa.propriedade}}</p>
               <button (click)="cadastroValorPropriedade(propriedadeTexto, indice, tarefa)" *ngIf="tarefa.click">cadastro</button>
            </div>
            <button class="botaoRemoverTarefa" (click)="removerTarefa(indice)" [disabled]="cardRemoveBoolean">Remover</button>
          </div>
        </h4>
      </div>
    </div>
  </section>
</div>
